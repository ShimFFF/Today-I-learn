# [TIL] TCP UDP

##  πƒ μ΅λ‹΄
μ” λ‚΄μ©λ„ μ„λ²„ μ¤ν„°λ””λ¥Ό μ¤€λΉ„ν•λ©° λ” μμ„Έν μ•κ²λ λ‚΄μ©μ΄λ‹¤. μ‚¬μ‹¤ TCP, UDPμ— λ€ν•΄μ„λ” μ•κ³ λ” μμ—λ‹¤. μ •λ§ μ•κ³ λ§ μμ—κΈ°μ— μ¤ν„°λ””λ¥Ό μ¤€λΉ„ν•λ©° μ΄λ²μ—λ” μ§„μ§ μ΄ν•΄λ¥Ό ν•΄λ³΄μλΌλ” λ©ν‘λ¥Ό κ°€μ§€κ³  TIL μ£Όμ λ¥Ό TCP, UDPλ΅ μ„ μ •ν•κ³  λ‚λ¦„λ€λ΅ μ„¤λ…μ„ μ¨λ΄¤λ‹¤.

## π“„ λ°°μ΄ λ‚΄μ©
### TCPλ€?

## TCP **(Transmission Control Protocol)**

> μ‹ λΆ°μ„± μλ” μ—°κ²° κΈ°λ°μ ν”„λ΅ν† μ½λ΅, μ¤νΈλ¦Ό ν•νƒμ λ°μ΄ν„° ν†µμ‹ μ„ μ§€μ›
> 

- **μ‹ λΆ°μ„± μλ” μ—°κ²° κΈ°λ° ν”„λ΅ν† μ½:**  **β€¦ ex) 3-way handshake, 4-way handshake**
    
    TCPλ” μ—°κ²°μ„ μ„¤μ •ν•κ³  λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° μ „μ— μ‹ λΆ°μ„± μλ” μ—°κ²°μ„ ν™•λ¦½. μ΄ μ—°κ²°μ€ λ°μ΄ν„°μ μ •ν™•ν• μ „λ‹¬μ„ λ³΄μ¥ν•λ©°, λ°μ΄ν„°μ μμ„λ¥Ό μ μ§€ν•¨.
    
- **μ¤νΈλ¦Ό ν•νƒμ λ°μ΄ν„° ν†µμ‹ :**
    
    TCPλ” λ°μ΄ν„°λ¥Ό μ¤νΈλ¦ΌμΌλ΅ μ²λ¦¬ν•λ©°, λ°μ΄ν„°μ μΌλ¶€λ¶„μ΄ λ¶„ν• λκ±°λ‚ μ΅°κ°ν™”λμ§€ μ•κ³  μ „λ‹¬λ¨. μ΄λ΅μ¨ μ—°μ†μ μΈ λ°μ΄ν„° μ¤νΈλ¦Όμ„ λ³΄λ‚΄κ³  λ°›μ„ μ μμ.
    
- **μ†μ‹¤ λ° μ¬μ „μ†΅:**
    
    TCPλ” λ°μ΄ν„° μ „μ†΅ μ¤‘ μ†μ‹¤λ ν¨ν‚·μ„ κ°μ§€ν•κ³ , μ†μ‹¤λ ν¨ν‚·μ„ λ‹¤μ‹ μ”μ²­ν•μ—¬ μ‹ λΆ°μ„±μ„ μ μ§€ν•¨. λ”°λΌμ„ λ°μ΄ν„° μ†μ‹¤μ„ μµμ†ν™”ν•κ³  μ•μ •μ μΈ ν†µμ‹ μ„ μ§€μ›.
    

**μ‚¬μ© μμ‹:**

- **μ›Ή λΈλΌμ°μ§•:**
    
    μ›Ή νμ΄μ§€λ¥Ό λ¶λ¬μ¬ λ• μ‚¬μ©μκ°€ μ •ν™•ν• λ°μ΄ν„°λ¥Ό λ³Ό μ μλ„λ΅ μ‹ λΆ°μ„± μλ” μ—°κ²°μ΄ ν•„μ”.
    
    *μ›Ή λΈλΌμ°μ €λ” HTTP ν”„λ΅ν† μ½ μ„μ—μ„ TCPλ¥Ό μ‚¬μ©ν•μ—¬ μ›Ή μ„λ²„μ™€ ν†µμ‹ *
    
- **μ΄λ©”μΌ μ „μ†΅**
    
    μ΄λ©”μΌμ„ μ „μ†΅ν•  λ• μ΄λ©”μΌ λ‚΄μ©μ μ†μ‹¤μ΄λ‚ λ³€ν•μ„ ν”Όν•κΈ° μ„ν•΄ TCPλ¥Ό μ‚¬μ©.
    
    S*MTP (Simple Mail Transfer Protocol) λ“±μ ν”„λ΅ν† μ½μ€ TCPλ¥Ό κΈ°λ°μΌλ΅ λ™μ‘*
    

## 3-way handshake

> ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ‹ λΆ°μ„± μλ” μ—°κ²°μ„ ν™•λ¦½ν•κΈ° μ„ν•΄ μ‚¬μ©
> 

![3-way handshake](img1.png)

- TCPμ μ—°κ²° μ„¤μ • κ³Όμ • μ¤‘ ν•λ‚
    
    ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ΄κΈ° μ—°κ²° μ„¤μ •μ„ μ•μ „ν•κ² μν–‰ν•κΈ° μ„ν• μ¤‘μ”ν• μ μ°¨
    

**κ³Όμ •**

1. **ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ—κ² μ—°κ²° μ”μ²­ (SYN):**
    - ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ—°κ²°μ„ μ”μ²­ν•κΈ° μ„ν•΄ SYN(Synchronize) ν¨ν‚·μ„ λ³΄λƒ„. μ΄ ν¨ν‚·μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ™€ ν†µμ‹ μ„ μ‹μ‘ν•κ³ μ ν•¨μ„ λ‚νƒ€λƒ….
    - ν΄λΌμ΄μ–ΈνΈλ” μ„μμ μ΄κΈ° μμ°¨ λ²νΈ(ISN - Initial Sequence Number)λ¥Ό μ„ νƒν•κ³  μ΄λ¥Ό SYN ν¨ν‚·μ— ν¬ν•¨μ‹ν‚΄.
    
    ***listen μƒνƒμΈ μ„λ²„μ μ†μΌ“μ— μ—°κ²° μ”μ²­μ„ λ³΄λ‚΄λ” κ²ƒ***
    
2. **μ„λ²„κ°€ μ—°κ²° μ”μ²­ μλ½ λ° μ‘λ‹µ (SYN-ACK):**
    - μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ SYN ν¨ν‚·μ„ λ°›μΌλ©΄ μ—°κ²° μ”μ²­μ„ μλ½ν•κ³ , ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ ν†µμ‹ μ„ μ„ν• μμ‹ μ μ΄κΈ° μμ°¨ λ²νΈλ¥Ό μ„ νƒν•¨.
    - μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ ISNμ— 1μ„ λ”ν• κ°’μ„ μμ‹ μ ISNμΌλ΅ μ‚¬μ©ν•κ³ , SYN-ACK ν¨ν‚·μ„ ν΄λΌμ΄μ–ΈνΈμ—κ² λ³΄λƒ„. μ΄ ν¨ν‚·μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ μ—°κ²° μ”μ²­μ„ μλ½ν•¨μ„ μλ―Έ.
    
    ***accept μ‹μ¤ν… μ½ μ΄ν›„ μ§„ν–‰***
    
3. **ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ μ‘λ‹µ ν™•μΈ (ACK):**
    - ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ SYN-ACK ν¨ν‚·μ„ λ°›μΌλ©΄ μ΄μ— λ€ν• ν™•μΈ μ‘λ‹µ(ACK - Acknowledgment) ν¨ν‚·μ„ μ„λ²„μ—κ² λ³΄λƒ„. μ΄ ν¨ν‚·μ€ μ„λ²„λ΅λ¶€ν„°μ μ‘λ‹µμ„ ν™•μΈν•κ³  μ—°κ²°μ΄ ν™•λ¦½λμ—μμ„ μ•λ¦Ό.
    - μ΄μ  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„ κ°„μ μ‹ λΆ°μ„± μλ” μ—°κ²°μ΄ ν™•λ¦½λμ—μΌλ©°, μ–‘μ½μ—μ„ λ°μ΄ν„°λ¥Ό μ•μ „ν•κ² μ£Όκ³ λ°›μ„ μ μμ.
    
    ***ν™•μΈν•λ©΄ Established μƒνƒλ¥Ό μμ…ν•κ³  λ³Έκ²©μ μΈ λ°μ΄ν„°μ μ†΅/μμ‹ μ΄ μ΄λ£¨μ–΄μ§***
    

<br>

### UDPλ€?

## UDP **(User Datagram Protocol)**

> λΉ„μ—°κ²°ν• ν”„λ΅ν† μ½λ΅, λ°μ΄ν„°λ¥Ό λ°μ΄ν„°κ·Έλ¨ ν•νƒλ΅ μ£Όκ³  λ°›μ
> 

UDP μ „μ© μ†μΌ“ = datagram μ†μΌ“

- **λΉ„μ—°κ²°ν• ν”„λ΅ν† μ½:**
    
    UDPλ” μ—°κ²°μ„ μ„¤μ •ν•μ§€ μ•κ³  λ°μ΄ν„°λ¥Ό μ „μ†΅. μ΄λ΅ μΈν•΄ μ—°κ²° μ„¤μ • λ° ν•΄μ μ— ν•„μ”ν• μ¤λ²„ν—¤λ“κ°€ μ—†μ–΄ λΉ λ¥Έ λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥.
    
- **λ°μ΄ν„°κ·Έλ¨ ν•νƒμ λ°μ΄ν„° ν†µμ‹ **
    
    UDPλ” λ°μ΄ν„°λ¥Ό λ°μ΄ν„°κ·Έλ¨ ν•νƒλ΅ μ „μ†΅. μ΄λ” λ°μ΄ν„°λ¥Ό μ—¬λ¬ κ°μ ν¨ν‚·μΌλ΅ λ‚λ„μ–΄ λ³΄λ‚΄λ” κ²ƒμ„ μλ―Έν•λ©°, ν¨ν‚· κ°„μ μ—°κ²°μ΄λ‚ μμ„λ¥Ό μ μ§€ν•μ§€ μ•μ
    
- **μ‹ μ†ν• λ°μ΄ν„° μ „μ†΅:**
    
    UDPλ” μ†μ‹¤λ λ°μ΄ν„°μ μ¬μ „μ†΅μ„ ν•μ§€ μ•μΌλ―€λ΅ TCPλ³΄λ‹¤ λΉ λ¥Έ λ°μ΄ν„° μ „μ†΅μ΄ κ°€λ¥ν•©λ‹λ‹¤. κ·Έλ¬λ‚ μ΄λ΅ μΈν•΄ λ°μ΄ν„° μ†μ‹¤μ΄λ‚ μμ„ λ³€κ²½μ΄ λ°μƒν•  μ μμ
    

**μ‚¬μ© μμ‹:**

- **μ¤νΈλ¦¬λ° λ―Έλ””μ–΄:** μ‹¤μ‹κ°„ μ¤λ””μ¤ λ° λΉ„λ””μ¤ μ¤νΈλ¦¬λ° μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„ UDPλ¥Ό μ‚¬μ©ν•μ—¬ λΉ λ¥΄κ² λ°μ΄ν„°λ¥Ό μ „μ†΅
- **DNS (Domain Name System):** DNS μΏΌλ¦¬λ” λΉ λ¥Έ μ‘λ‹µμ΄ μ¤‘μ”ν•λ©°, μ΄λ¥Ό μ„ν•΄ UDPλ¥Ό μ‚¬μ©


## β¨ μ•μΌλ΅μ κ³„ν
μ„λ²„ μ¤ν„°λ”” μ—΄μ‹¬ν μ°Έμ—¬ν•κΈ°!