# [TIL] Web Server와 505 오류

##  😃 잡담
오늘은 Static page와 Reverse Proxy에 대해 실습을 했다 <br>
오늘은 일단 실습을 해서 몸으로 직접 경험한 뒤, 각종 개념을 찾아서 실습과 연관지어 이해하는 방식으로 공부를 했다.<br>
해당 방식으로 공부를 하니 이론이 기억에도 잘 남고 이해도 잘되는 것 같았다. 요즘은 여러가지 공부 방법을 시도해보며 빠르게 내가 성장할 수 있는 방법이 무엇일지 고민하고 있다. 아마도..빠르게 성장할 수 있는 방법은 **여러 가지 경험을 내 것으로 만드는 것**이라고 생각하기에..! 학기가 끝나고 방학에 여유가 있으면 이것 저것 찾아서 많이 해봐야겠다.!<br>
오늘 배운 내용에는 나의 실습과 각종 이론을 연관하여 글을 쓸 것이다. 때문에 ***Static page, Dynamic page, Web Application Server, Web Sever와 Web Application Server를 구분하는 이유*** 등의 내용도 공부 했지만, ***502 Bad Gateway, Web Sever***에 대해서만 배운 내용을 쓰고자 한다!

## 📄 배운 내용

### 502 Bad Gateway
> 웹 서버 또는 프록시 서버가 업스트림 서버(백엔드 서버)로부터 유효한 응답을 수신하지 못할 때 발생하는 오류
    
    
<br>
 
💡 현 상황에서 502 오류가 뜨는 이유
    
→ **3000번 포트를 사용하는 웹 애플리케이션의 코드 또는 프로세스가 없기에**
    
→ 3000번 포트에서 웹 서버 또는 웹 애플리케이션 서버 프로세스를 실행해야 함
    
    1. NGINX는 리버스 프록시 역할을 수행
    2. 요청을 업스트림 서버로 전달
    3. 이 경우, 업스트림 서버는 3000번 포트에서 동작
    4. 해당 포트에서 실행 중인 프로세스가 없음
    5. NGINX는 업스트림 서버에 연결할 수 없음
    6. 502 오류

<br>

**502 오류가 뜨는 이유**

| 업스트림 서버 다운 또는 불안정 | 업스트림 서버 (웹 애플리케이션 서버 또는 데이터베이스 서버)가 다운되었거나 불안정한 상태인 경우 |
| --- | --- |
| 연결 시간 초과 | NGINX 또는 프록시 서버가 업스트림 서버와의 연결을 설정하는 데 시간 초과되었을 때 (네트워크 문제, 서버 부하 또는 업스트림 서버 응답 지연과 관련) |
| 부적절한 프록시 구성 | NGINX 또는 프록시 서버의 구성이 부적절하거나 잘못된 경우 (ex 프록시 패스 (proxy_pass)가 잘못 설정되거나 업스트림 서버의 포트 또는 주소가 잘못 설정된 경우) |
| 업스트림 서버 오류 응답 | 업스트림 서버가 요청을 처리하고 오류 응답을 생성하는 경우 (업스트림 서버의 오류 로그 및 상태를 확인해야 함) |
| 서버 자원 부족 | 업스트림 서버가 서버 자원 (CPU, 메모리, 대역폭 등) 부족으로 요청을 처리하지 못할 때 |
| 방화벽 또는 보안 그룹 설정 | 방화벽 또는 보안 그룹 설정으로 인해 프록시 서버와 업스트림 서버 간의 통신이 차단될 경우 (포트 및 방화벽 규칙을 확인 해야 함) |
| 클라이언트 요청 오류 | 클라이언트 요청이 올바르게 구성되지 않은 경우 |

<br>

### Web Server

> 하드웨어와 소프트웨어로 구분된다.

**하드웨어**

→ web 서버가 설치되어 있는 컴퓨터

*(우리 실습의 경우 AWS의 EC2가 웹서버 하드웨어의 역할)*

<br>

**소프트웨어**

→ 클라이언트로부터 HTTP 요청을 받아 **정적인 콘텐즈**를 제공하는 프로그램

*정적인 콘텐즈 : .html, .jpeg, .css*

*(우리 실습의 경우 NGINX가 웹서버 소프트웨어의 역할)*

(*NGINX는 웹 서버 소프트웨어 중 하나로, 가벼우면서도 높은 성능을 제공하며 정적 콘텐츠를 효율적으로 처리하는 데 적합*)

<br>

### 기능

> HTTP 프로토콜을 기반으로 클라이언트의 요청을 서비스 함
> 
1. **정적인 콘텐츠 제공**
    
    WAS를 거치지 않고 바로 자원을 제공

    <br>
    
2. **동적인 컨텐츠 제공을 위한 요청을 전달**
    
    클라이언트의 요청을 WAS에 보내고, WAS가 처리한 결과를 클라이언트에게 전달